<script>
        // Simulasi database untuk menyimpan data user
        const usersDB = {};
        let loggedInUser = null;

        // Data soal ujian (database soal)
        // Edit array di sini untuk mengubah soal, opsi, dan jawabannya.
        // Anda bisa menambahkan lebih banyak soal di setiap kategori.
        // Untuk kategori pemecahan masalah, soal yang saling terkait bisa dikelompokkan dalam array.
        const questionBank = {
            verbal: [
                { question: "Pilih sinonim yang tepat untuk 'abstraksi'.", options: ["Konkret", "Penjabaran", "Ringkasan", "Intisari", "Representasi"], correctAnswer: 3 },
                { question: "Pilih antonim yang tepat untuk 'mandiri'.", options: ["Bergantung", "Berdiri sendiri", "Otonomi", "Independen", "Merdeka"], correctAnswer: 0 },
                // Tambahkan lebih banyak soal verbal di sini (total 23+ soal)
                { question: "LAUT : SAMUDRA = ... = ...", options: ["SUNGAI : LAUT","DANAU : AIR","BUKIT : LEMBAH", "PULAU : BENUA", "DELTA : LAUT"],correctAnswer: 3},
                { question: "STUNTING : GIZI = ... : ...", options: ["GEMUK : LEMAK","SAKIT : DOKTER","PENDEK : BESAR","PINTAR : BELAJAR","BODOH : ILMU"], correctAnswer: 4},
                { question: "SUARA berhubungan dengan ..., sebagaimana ... berhubungan dengan PADAM", options: [" MERDU - REDUP","LAGU - GELAP","BISING - TERBAKAR","NADA - TERANG","BISU - ENERGI"], correctAnswer: 4},
                { question: "... berhubungan dengan SEPAK BOLA, sebagaimana BERBISIK berhubungan dengan ...", options: ["KOMPETISI - SUARA","KIPER - KOMUNIKASI","LIGA - BERJALAN","FUTSAL - BERBICARA","LAPANGAN - RASA TAKUT"], correctAnswer: 3},
                { question: "GELAP : LAMPU : TERANG = ...", options: ["KENYANG : MAKANAN : LAPAR","DAHAGA : MINUMAN : HAUS","BINTANG : BULAN : MALAM","TERANG : SIANG : MATAHARI","LAPAR : MAKANAN : KENYANG"], correctAnswer: 4},
                { question: "MONSTER : JOHAN : TENMA =", options: ["JUJUTSU KAISEN : GOJO : TOJI","PECO : SMILE : PING PONG THE ANIMATION","HIRO : INUYASHIKI : INUYASHIKI","MORIARTY THE PATRIOT : WILLIAM : SHERLOCK","ZANKYOU NO TERROR : NINE : TWELVE"], correctAnswer: 3},
                { question: "PEMBELAAN : PLEIDOI = HUKUMAN : ...", options: ["SAKSI","TERDAKWA","VONIS","HAKIM","PENGADILAN"], correctAnswer: 2},
                { question: "SAKIT : DOKTER = MOGOK : ...", Options: ["BENGKEL","RUMAH SAKIT","DORONG","SOPIR","MONTIR"], correctAnswer: 4},
                { question: "Semua peserta kelas TBS 2 CBBI selalu semangat mempelajari penalaran logis. Andi selalu semangat mempelajari penalaran logis.", options: ["Andi peserta kelas TBS 2 CBBI.","Andi pemateri kelas TBS 2 CBBI.","Tidak dapat disimpulkan.","Andi bukan peserta kelas TBS 2 CBBI.","Andi belajar autodidak."], correctAnswer: 2},
                { question: "Tidak ada bunga mawar kecuali berwarnaputih dan merah. Samuel menerima bunga bukan putih, bukan merah. Bunga yang diterima oleh Samuel adalah ...", options: ["Bunga Mawar Putih","Bunga Mawar Merah","Bunga bukan mawar putih","Bunga bukan mawar","Bunga mawar bukan merah dan bukan putih"], correctAnswer: 3},
                { question: "Raehan adalah siswa yang paling pandai di kelasnya. Lana kalah pandai dibanding Noka, tetapi Noka sama pandainya dengan Susi. Susi lebih pandai dari Adi.", options:["Noka tidak lebih pandai daripada Lana.","Lana tidak kalah pandai dari Raehan.","Susi lebih pandai dari Raehan.","Susi lebih pandai daripada Lana.","Adi sama pandainya dengan Lana."], correctAnswer: 3},
                { question: "Jika bepergian ke Timbuktu, maka harus datang ke Patena. Jika datang ke Patena, maka harus melalui jembatan Torosi.", options: ["Sebagian yang datang ke Patena melalui jembatan Torosi.","Semua yang bepergian ke Timbuktu harus melalui jembatan Torosi.","Semua yang melalui jembatan Torosi tentu bepergian ke Timbuktu.","Sebagian yang pergi ke Timbuktu melalui jembatan Torosi.","Semua yang tidak bepergian ke Timbuktu tidak melalui jembatan Torosi."], correctAnswer: 1},
                { question: "Jika pernyataan \"Beberapa pejabat Indonesia tidak melakukan korupsi\" adalah salah, maka ...", options: [" Semua pejabat Indonesia tidak melakukan korupsi.","Tidak ada jawaban yang benar.","Sebagian pejabat Indonesia melakukan korupsi.","Korupsi dilakukan oleh sebagian pejabat Indonesia.","Semua pejabat Indonesia melakukan korupsi."], correctAnswer: 4},
                { question: "Pernyataan yang senilai dengan \"Jika semua orang berbuat baik, maka semua orang masuk surga\" adalah ...", options: ["Jika ada beberapa orang yang tidak berbuat baik, maka ada beberapa orang yang tidak masuk surga.","Semua orang yang tidak berbuat baik akan masuk neraka.","Orang yang berbuat baik pasti masuk surga.","Orang yang berbuat jahat masuk neraka.","Tidak ada yang benar."], correctAnswer: 4},
                { question: "Ingkaran dari pernyataan \"Setiap kepala keluarga bertanggung jawab atas kesejahteraan keluarganya dan wajib menanggung kebutuhan keluarga\"adalah ...", options: ["Tidak semua kepala keluarga bisa diandalkan apalagi harus menanggung kebutuhan keluarganya.","Seorang kepala keluarga yang baik adalah menanggung segala kebutuhan keluarganya.","Ada kepala keluarga yang tidak bertanggung jawab atas keluarganya.","Ada beberapa kepala keluarga yang tidak bertanggung jawab atas kesejahteraan keluarganya atau tidak menanggung kebutuhan keluarganya.","Tidak ada jawaban yang benar."], correctAnswer: 3},
                { question: "Pembeli di toko A harus membayar kontan atau membayar dengan kartu kredit. <br><br>Dzakiyah pembeli di toko A padahal tidak membayar kontan.", options: ["Dzakiyah membayar dengan kartu kredit.","Dzakiyah membayar kontan ketika membeli di toko A.","Dzakiyah tidak membayar ketika membeli di toko A.","Dzakiyah tidak mempunyai kartu kredit.","Dzakiyah tidak mempunyai uang kontan."], correctAnswer: 0},
                { question: "Aria berlari tidak secepat Bram, tetapi sama cepat dengan Coki. <br><br>Dani jauh lebih cepat larinya daripada Coki dan Eki, sedangkan Aria berlari lebih lambat daripada Eki. Anto berlari jauh lebih cepat daripada Eki dan Dani. Yang kecepatan larinya berada pada urutan ketiga tercepat adalah ...", options: ["Aria","Eki","Anto","Dani","Coki"], correctAnswer: 1},
                { question: "Delapan orang (K, L, M, N, O, P, Q, dan R) sedang belajar bersama dengan menggunakan meja persegi panjang dan empat kursi yang saling berhadapan. O dan Q duduk di kedua ujung meja pada sisi yang sama. M duduk berseberangan dengan K dan P . N duduk di ujung meja, tepat di hadapan O. R duduk tepat di sebelah L. Jika Q dan R tepat berhadapan, yang duduk di sebelah N adalah ...", options: ["O","P","K","L","M"], correctAnswer: 4},
                //Batas input Puji.---------------------------------------------------------------------------------------------------------------------------------------------
                { question: "Sinonim dari 'efisien' adalah...", options: ["Lambat", "Hemat", "Boros", "Cepat", "Tepat"], correctAnswer: 1 },
                { question: "Lawan kata 'pasif' adalah...", options: ["Aktif", "Diam", "Lemah", "Loyal", "Statis"], correctAnswer: 0 },
                { question: "'Konklusi' memiliki arti yang sama dengan...", options: ["Pendahuluan", "Isi", "Pembahasan", "Kesimpulan", "Argumen"], correctAnswer: 3 },
                { question: "'Paradigma' adalah...", options: ["Teori", "Contoh", "Pola pikir", "Sistem", "Proses"], correctAnswer: 2 },
                { question: "Apa lawan kata dari 'temporer'?", options: ["Sesaat", "Permanen", "Cepat", "Baru", "Lama"], correctAnswer: 1 },
                { question: "Apa sinonim dari 'kompeten'?", options: ["Berhasil", "Mampu", "Cerdik", "Terampil", "Bijak"], correctAnswer: 1 },
                { question: "Kata 'degradasi' berarti...", options: ["Peningkatan", "Penurunan", "Perbaikan", "Stagnasi", "Perkembangan"], correctAnswer: 1 },
                { question: "'Konvergen' adalah antonim dari...", options: ["Mendekat", "Menjauh", "Berkumpul", "Memisah", "Menuju"], correctAnswer: 3 },
                { question: "Sinonim dari 'generalisasi' adalah...", options: ["Pengkhususan", "Penyelidikan", "Perampatan", "Perincian", "Analisis"], correctAnswer: 2 },
                { question: "'Autentik' memiliki arti yang sama dengan...", options: ["Palsu", "Asli", "Modern", "Unik", "Tiruan"], correctAnswer: 1 },
                { question: "Lawan kata 'kontra' adalah...", options: ["Sama", "Sesuai", "Pro", "Berbeda", "Mirip"], correctAnswer: 2 },
                { question: "Apa sinonim dari 'konstan'?", options: ["Berubah", "Tetap", "Cepat", "Stabil", "Labil"], correctAnswer: 1 },
                { question: "Kata 'heterogen' berlawanan dengan...", options: ["Berbeda", "Seragam", "Campuran", "Beragam", "Aneh"], correctAnswer: 1 },
                { question: "'Konsensus' berarti...", options: ["Perdebatan", "Kesepakatan", "Pendapat", "Perbedaan", "Musyawarah"], correctAnswer: 1 },
                { question: "Sinonim dari 'prosedur' adalah...", options: ["Langkah", "Cara", "Sistem", "Proses", "Aturan"], correctAnswer: 2 },
                { question: "'Eksklusif' adalah antonim dari...", options: ["Terbuka", "Tertutup", "Spesial", "Umum", "Modern"], correctAnswer: 3 },
                { question: "'Individu' memiliki makna serupa dengan...", options: ["Kelompok", "Sendiri", "Masyarakat", "Satu orang", "Tergabung"], correctAnswer: 3 },
                { question: "Lawan kata dari 'optimis' adalah...", options: ["Pesimis", "Percaya", "Senang", "Berharap", "Sedih"], correctAnswer: 0 },
                { question: "Sinonim dari 'destruktif' adalah...", options: ["Membangun", "Merusak", "Memperbaiki", "Kreatif", "Menghancurkan"], correctAnswer: 4 },
                { question: "'Fleksibel' berlawanan dengan...", options: ["Lentur", "Kaku", "Elastis", "Mudah", "Sulit"], correctAnswer: 1 },
                { question: "Apa sinonim dari 'presisi'?", options: ["Lama", "Tepat", "Cepat", "Jarak", "Ukuran"], correctAnswer: 1 },
                { question: "'Akar' berpasangan dengan...", options: ["Bunga", "Daun", "Pohon", "Batang", "Buah"], correctAnswer: 2 },
                { question: "Kata yang tidak sejenis dengan 'air' adalah...", options: ["Susu", "Jus", "Minyak", "Sari", "Kopi"], correctAnswer: 2 },
                { question: "Lawan kata 'subjektif' adalah...", options: ["Pribadi", "Independen", "Netral", "Objektif", "Personal"], correctAnswer: 3 },
                { question: "'Evaporasi' adalah proses...", options: ["Pembekuan", "Pengembunan", "Penguapan", "Pencairan", "Peleburan"], correctAnswer: 2 }
            ],
            numerik: [
                { question: "Jika 5 + x = 12, berapakah nilai x?", options: ["5", "6", "7", "8", "12"], correctAnswer: 2 },
                { question: "Berapakah hasil dari 15 x 3?", options: ["35", "45", "55", "65", "75"], correctAnswer: 1 },
                // Tambahkan lebih banyak soal numerik di sini (total 25+ soal)
                {question: "625, 1296, 25, 36, 5, ...", options: ["4","3","7","5","6"], correctAnswer: 4},
                {question: "50, 40, 100, 90, 50, ..., ...", options: ["145, 100","142, 90","140, 100","139, 90","100, 140"], correctAnswer: 2},
                { question: "15, 16, 20, 29, ..., ...", options: ["30,34","32,35","35,45","45,70","70,85"], correctAnswer: 3},
                { question: "26, 27, 29, 32, ..., ..., 40, 38, 35, 31, 26", options: ["36,41","37,42","38,43","39,44","40,45"], correctAnswer: 0},
                { question: "A, A, I, D, U, G, E, J, ..., ...", options: ["O,L","O,M","K,L","K,M","M,O"], correctAnswer: 1},
                { question: "A, A, M, N, A, A, O, P, A, A, ..., ...", options: ["S,Q","R,S","Q,S","S,R","Q,R"], correctAnswer: 4},
                { question: "134, 26, 160, 186, ...", options: ["340","346","360","366","380"], correctAnswer: 1},
                { question: "a, m, n, b, o, p, c, ....", options: ["a","d","q","r","p"], correctAnswer: 2},
                { question: "Nilai (0,5 + 0,6)² adalah... ", options: ["121","12,1","1,21","0,0121","0,121"], correctAnswer: 3},
                { question: "Jika p = a + 5 dan q = a + 4, maka 3p + q = ...", options: ["3a + 9","3a + 19","5a + 29","4a + 9","4a + 19"], correctAnswer: 4},
                { question: "234(15) + 234(23) - 233(38)=...", options: ["2.318","1.722","318","27","38"], correctAnswer: 4},
                { question: "Jika Y% dari 80 adalah 32, maka nilai Y =", options: ["40","50","60","25,6","25"], correctAnswer: 0},
                { question: "Sepuluh anak membentuk kelompok bermain yang masing-masing terdiri empat anak dan enam anak. Rata-rata usia kelompok empat anak adalah 6 tahun, dan kelompok enam anak adalah 6,5 tahun. Jika satu anak dari masing-masing kelompok ditukarkan, maka rata-rata usia kedua kelom pok sama. Berapa tahun selisih usia kedua anak yang ditukarkan?", options: ["1,2","1,0","0,5","0,4","2,1"], correctAnswer: 0},
                { question: "Jam tangan Budi yang setiap jamnya terlalu cepat 4 menit dicocokan dengan jam tangan Dodi yang setiap jamnya terlambat 3 menit, tepat pada tengah malam. Berapa jam perbedaan antara kedua jam itu bila jam yang tepat waktu menunjukan tepat jam 12 siang?", options: ["2 jam 14 menit","1 jam 24 menit","1 jam 4 menit","44 menit","0 menit"], correctAnswer: 1},
                { question: "Seseorang membeli 3 buah buku dengan harga rata-rata Rp2.000,00 per buah dan membeli 6 buah buku serupa dengan harga rata-rata Rp8.000,00 per buah. Berapakah harga rata-rata untuk keseluruhan buku?", options: ["Rp4.500,00","Rp5.000,00","Rp6.000,00","Rp7.500,00","Rp8.000,00"], correctAnswer: 2},
                { question: "Seorang pengusaha menjual jagung dan gula menggunakan truk. Pengu- saha tersebut membeli jagung dengan harga Rp5.000 per kilogram dan gula Rp7.000 per kilogram. Modal yang tersedia Rp1.770.000. Jumlah jagung dan gula dalam truk tidak lebih dari 300 kg. Jika harga jual jagung Rp5.500 per kilogram dan gandum Rp7.200 per kilogram maka laba maksimum yang diperoleh adalah ....", options: ["Rp180.000","Rp350.000","Rp560.000","Rp500.000","Rp109.500"], correctAnswer: 4},
                { question: "Berapakah nilai dari x+y ? <br>(1) Diketahui x-y=3 <br>(2) x²-y² =9", options: ["Pernyataan (1) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (2) SAJA tidak cukup.","Pernyataan (2) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (1) SAJA tidak cukup.","Dua pernyataan BERSAMA-SAMA cukup untuk menjawab pertanyaan, tetapi SATU pernyataan SAJA tidak cukup.","Pernyataan (1) dan pernyataan (2) tidak cukup untuk menjawab pertanyaan","Kedua pernyataan tidak cukup untuk menjawab pertanyaan."], correctAnswer: 2},
                { question: "Misalkan x, y, z menyatakan bilangan real yang memenuhi persamaan x + 2y + 3z = 10. Berapakah nilai x? <br>Putuskan apakah pernyataan (1) dan (2) berikut cukup untuk menjawab pertanyaan tersebut. <br>(1) z = 1 <br>(2) x+y=5", options: ["Pernyataan (1) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (2) SAJA tidak cukup.","Pernyataan (2) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (1) SAJA tidak cukup.","DUA pernyataan BERSAMA-SAMA cukup untuk menjawab pertanyaan, tetapi SATU pernyataan SAJA tidak cukup.","Pernyataan (1) SAJA cukup untuk menjawab pertanyaan dan pernyataan (2) SAJA cukup.","Kedua pernyataan tidak cukup untuk menjawab pertanyaan."], correctAnswer: 2},
                { question: "Tentukan apakah kedua pernyataan berikut cukup untuk menentukan nilai panjang KA pada kubus ABCD.EFGH! <br>(1) K adalah titik perpotongan diagonal EG dan HF. <br>(2) Jarak KG adalah 4√5​ cm.", options: ["Pernyataan (1) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (2) SAJA tidak cukup.","Pernyataan (2) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (1) SAJA tidak cukup.","DUA pernyataan BERSAMA-SAMA cukup untuk menjawab pertanyaan, tetapi SATU pernyataan SAJA tidak cukup.","Pernyataan (1) SAJA cukup untuk menjawab pertanyaan dan pernyataan (2) SAJA cukup.","Kedua pernyataan tidak cukup untuk menjawab pertanyaan."], correctAnswer: 2},
                { question: "Jika m dan n merupakan bilangan bulat positif, apakah m-n kelipatan 5? <br>Putuskan apakah pernyataan (1) dan (2) berikut cukup untuk menjawab   pertanyaan tersebut? <br>(1) m-n kelipatan 10 <br>(2) n kelipatan 5", options: ["Pernyataan (1) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (2) SAJA tidak cukup.","Pernyataan (2) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (1) SAJA tidak cukup.","DUA pernyataan BERSAMA-SAMA cukup untuk menjawab pertanyaan, tetapi SATU pernyataan SAJA tidak cukup.","Pernyataan (1) SAJA cukup untuk menjawab pertanyaan dan pernyataan (2) SAJA cukup.","Kedua pernyataan tidak cukup untuk menjawab pertanyaan."], correctAnswer: 0},
                { question: "Dennis dan Willy masing-masing bekerja mengencangkan sekrup pada suatu perakitan mobil dengan kecepatan yang berbeda. Apakah Willy lebih cepat mengencangkan sekrup daripada Dennis? <br>(1) Willy mengencangkan 5 sekrup per menit, sedangkan Dennis mengencangkan 400 sekrup per jam. <br>(2) Jika kecepatan Willy bertambah 50% maka ia menjadi  12,5% lebih cepat dalam mengencangkan sekrup dibandingkan Dennis.", options: ["Pernyataan (1) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (2) SAJA tidak cukup.","Pernyataan (2) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (1) SAJA tidak cukup.","DUA pernyataan BERSAMA-SAMA cukup untuk menjawab pertanyaan, tetapi SATU pernyataan SAJA tidak cukup.","Pernyataan (1) SAJA cukup untuk menjawab pertanyaan dan pernyataan (2) SAJA cukup.","Kedua pernyataan tidak cukup untuk menjawab pertanyaan."], correctAnswer: 3},
                { question: "Jika  x adalah bilangan bulat positif, apakah x bilangan prima? <br>(1) 3x + 1 bilangan prima. <br>(2) 5x + 1 bilangan prima.", options: ["Pernyataan (1) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (2) SAJA tidak cukup.","Pernyataan (2) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (1) SAJA tidak cukup.","DUA pernyataan BERSAMA-SAMA cukup untuk menjawab pertanyaan, tetapi SATU pernyataan SAJA tidak cukup.","Pernyataan (1) SAJA cukup untuk menjawab pertanyaan dan pernyataan (2) SAJA cukup.","Kedua pernyataan tidak cukup untuk menjawab pertanyaan."], correctAnswer: 4},
                { question: "Sebanyak 20 buah jeruk di kotak p masing-masing memiliki berat yang kurang dari setiap jeruk di kotak q. Jika terdapat 19 buah jeruk di kotak q , berapakah median berat dari total 39 jeruk tersebut? <br>(1) Jeruk yang paling ringan di kotak q adalah 90 gram. <br>(2) Jeruk yang paling berat di kotak p adalah 75 gram.", options: ["Pernyataan (1) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (2) SAJA tidak cukup.","Pernyataan (2) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (1) SAJA tidak cukup.","DUA pernyataan BERSAMA-SAMA cukup untuk menjawab pertanyaan, tetapi SATU pernyataan SAJA tidak cukup.","Pernyataan (1) SAJA cukup untuk menjawab pertanyaan dan pernyataan (2) SAJA cukup.","Kedua pernyataan tidak cukup untuk menjawab pertanyaan."], correctAnswer: 1},
                { question: "S adalah himpunan dari bilangan bulat tak nol. Apakah jumlah semua bilangan di S merupakan bilangan genap? <br>(1) Jumlah dari semua bilangan ganjil adalah genap. <br>(2) Jumlah dari semua bilangan positif adalah ganjil.", options: ["Pernyataan (1) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (2) SAJA tidak cukup.","Pernyataan (2) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (1) SAJA tidak cukup.","DUA pernyataan BERSAMA-SAMA cukup untuk menjawab pertanyaan, tetapi SATU pernyataan SAJA tidak cukup.","Pernyataan (1) SAJA cukup untuk menjawab pertanyaan dan pernyataan (2) SAJA cukup.","Kedua pernyataan tidak cukup untuk menjawab pertanyaan."], correctAnswer: 0},
                { question: "Berapakah nilai 2x + 2y ? <br><br>(1) 4x + 4y = 32 <br>(2) x = 8 - y", options: ["Pernyataan (1) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (2) SAJA tidak cukup.","Pernyataan (2) SAJA cukup untuk menjawab pertanyaan, tetapi pernyataan (1) SAJA tidak cukup.","DUA pernyataan BERSAMA-SAMA cukup untuk menjawab pertanyaan, tetapi SATU pernyataan SAJA tidak cukup.","Pernyataan (1) SAJA cukup untuk menjawab pertanyaan dan pernyataan (2) SAJA cukup.","Kedua pernyataan tidak cukup untuk menjawab pertanyaan."], correctAnswer: 3},

                // Batas input Puji --------------------------------------------------------------------------------------------------------------------------------------------------------------------------
                { question: "Jika 10 + 2y = 20, maka y adalah...", options: ["2", "5", "8", "10", "15"], correctAnswer: 1 },
                { question: "Hitunglah 20% dari 500.", options: ["50", "80", "100", "200", "250"], correctAnswer: 2 },
                { question: "Berapakah hasil dari 72 : 9?", options: ["6", "7", "8", "9", "12"], correctAnswer: 2 },
                { question: "Jika 2x + 5 = 15, maka x adalah...", options: ["2", "5", "8", "10", "15"], correctAnswer: 1 },
                { question: "Jika 3 x (4 + 2) = y, maka y adalah...", options: ["12", "15", "18", "21", "24"], correctAnswer: 2 },
                { question: "Berapakah nilai dari 121 - 11?", options: ["100", "110", "111", "112", "120"], correctAnswer: 1 },
                { question: "1/4 + 1/2 = ...", options: ["1/6", "2/6", "3/4", "1/2", "3/8"], correctAnswer: 2 },
                { question: "Hasil dari 3^2 + 4^2 adalah...", options: ["15", "25", "30", "36", "49"], correctAnswer: 1 },
                { question: "Berapakah hasil dari 100 x 0,5?", options: ["5", "10", "50", "500", "5000"], correctAnswer: 2 },
                { question: "Jika 3/5 dari 50 adalah x, maka x adalah...", options: ["10", "15", "20", "30", "40"], correctAnswer: 3 },
                { question: "Berapakah hasil dari 8 x 6 - 2?", options: ["40", "46", "48", "50", "52"], correctAnswer: 1 },
                { question: "Jika 10x - 20 = 80, maka x adalah...", options: ["8", "10", "12", "15", "20"], correctAnswer: 1 },
                { question: "Hasil dari (9 + 3) / 2 adalah...", options: ["4", "5", "6", "8", "12"], correctAnswer: 2 },
                { question: "Berapakah 50% dari 120?", options: ["25", "50", "60", "80", "100"], correctAnswer: 2 },
                { question: "Jika 16 - y = 4, maka y adalah...", options: ["4", "8", "12", "16", "20"], correctAnswer: 2 },
                { question: "Hitunglah 150 : 3.", options: ["25", "30", "40", "50", "75"], correctAnswer: 3 },
                { question: "Jika 4 x 4 x 4 = z, maka z adalah...", options: ["16", "24", "48", "64", "128"], correctAnswer: 3 },
                { question: "Berapakah hasil dari 2,5 + 3,5?", options: ["5", "5,5", "6", "6,5", "7"], correctAnswer: 2 },
                { question: "Jika 5x = 25, maka x adalah...", options: ["3", "4", "5", "6", "7"], correctAnswer: 2 },
                { question: "Berapakah 10% dari 1000?", options: ["10", "50", "100", "200", "1000"], correctAnswer: 2 },
                { question: "Hasil dari 100 - (20 x 2) adalah...", options: ["60", "70", "80", "90", "100"], correctAnswer: 0 },
                { question: "Jika 1/3 dari 60 adalah x, maka x adalah...", options: ["10", "20", "30", "40", "50"], correctAnswer: 1 },
                { question: "Berapakah nilai dari 13 x 5?", options: ["55", "60", "65", "70", "75"], correctAnswer: 2 },
                { question: "Hasil dari 10^2 adalah...", options: ["10", "20", "50", "100", "1000"], correctAnswer: 3 },
                { question: "Jika 20 + 3x = 50, maka x adalah...", options: ["5", "10", "15", "20", "25"], correctAnswer: 1 }
            ],
            pemecahanMasalah: [
                // Contoh set soal yang saling terkait (dikelompokkan dalam array)
                { passage: "Azmie adalah karyawan yang wajib memakai baju seragam dengan warna biru, kuning, putih, merah, dan hijau. Seragam dipakai selama lima hari kerja, yaitu Senin sampai Jumat. <br><br>1) Baju merah dipakai setelah setelah baju kuning. <br><br>2) Baju hijau boleh dipakai sebelum baju biru yang dipakai pada hari Jumat. <br><br>3) Baju kuning harus dipakai pada hari Selasa.",
                    questions: [
                        { question: "Urutan warna baju yang dipakai oleh Azmie mulai Senin sampai Rabu adalah ...", options: ["biru, kuning, hijau.","kuning, biru, putih.","kuning, merah, putih.","putih, kuning, hijau.","putih, kuning, merah."], correctAnswer: 4},
                        { question: "Urutan warna baju dipakai oleh Azmie di hari Senin, Rabu, dan Jumat adalah ...", options: ["putih, merah, biru.","biru, kuning, hijau.","kuning, biru, putih.","kuning, merah, putih.","putih, kuning, hijau."], correctAnswer: 0},
                        { question: "Urutan warna baju dipakai oleh Azmie mulai hari Rabu, Kamis, dan Jumat adalah ...", options: ["biru, kuning, hijau.","kuning, biru, putih.","putih, kuning, hijau.","kuning, merah, putih.","merah, hijau, biru"], correctAnswer: 4}
                    ]
                },
                { passage: "Baca paragraf ini: Sebuah perusahaan memiliki 150 karyawan. 60% dari karyawan tersebut adalah wanita. Sebanyak 20% dari total karyawan wanita adalah manajer",
                    questions: [
                        { question: "Berapa jumlah karyawan wanita?", options: ["60", "75", "90", "100", "120"], correctAnswer: 2},
                        { question: "Berdasarkan paragraf di atas, berapa jumlah manajer wanita?", options: ["9", "12", "18", "24", "30"], correctAnswer: 2}
                    ]
                },
                { passage: "(1) Indonesia memiliki kata yang cukup unik untuk mengekspresikan tertawa di internet. (2) Netizen Indonesia sering kali menggunakan kata wkwk (baca: weka-weka) untuk ekspresi kala gembira, senang dan geli tersebut. (3) Penggunaan kata wkwk di Indonesia bisa dikatakan sangat unik. (4) Warga dunia biasanya memilih istilah laugh out loud yang sering kali disingkat LOL atau haha untuk menggambarkan situasi tertawa. (5) Adapun, wkwk hanya digunakan orang Indonesia. (6) [...], dari mana kata wkwk itu berasal? <br><br>(7) Para anggota Quora asal Indonesia pun berlomba-lomba menjawab pertanyaan tersebut. (8) Salah satu pengguna Quora yang bernama Dio Wijayanto Nugroho menuturkan bahwa kata wkwk lahir di komunitas game online. (9) Penggunaan kata haha dianggap sangat formal di dunia game. (10) Pemain lebih memilih untuk menggunakan kata huehue dan huahua untuk ekspresi tertawa. (11) Nah, sama seperti gua menjadi gw, huruf U yang ada di huehue dan huahua diubah menjadi W sehingga pemain memilih menggunakan kata hwhwhw. (12) Kemudian, kata itu berubah lagi menjadi wkwk dengan alasan lebih mudah diketik dibandingkan haha. (13) Pemain game online bisa mengetikkan huruf W tanpa menggerakkan tangan kiri, sedangkan huruf K bisa diketik tanpa menggerakkan tangan kanan",
                    questions: [
                        { question: "Kalimat yang bebas dari kesalahan penulisan adalah ....", options: ["(2)","(4)","(5)","(9)","(11)"], correctAnswer: 4},
                        { question: "Konjungsi yang tepat untuk melengkapi kalimat (6) agar padu adalah ....", options: ["dengan demikian","atau","jadi","sebenarnya","lantas"], correctAnswer: 4},
                        { question: "Ide pokok paragraf kedua teks tersebut adalah ....", options: ["anggota Quora berlomba menjawab asal kata wkwk","wkwk berasal dari komunitas game online","asal mula munculnya kata wkwk","salah satu pendapat mengenai asal kata wkwk","kemudahan pemain game online mengetikkan huruf W"], correctAnswer: 3},
                        { question: "Gagasan utama kalimat (8) adalah …", options: ["Salah satu pengguna Quora bernama Dio Wijayanto.","Dio Wijayanto Nugroho menuturkan wkwk lahir di komunitas game online.","Pengguna Quora menuturkan wkwk lahir di komunitas game online.","Kemudahan menulis kata wkwk","Kata wkwk lahir di komunitas game online."], correctAnswer: 4}
                    ]
                },
                { passage: "Bahasa yang Taksa dan Samar-samar <br><br>Perlu dijelaskan bahwa sebagai aparatus komunikasi, bahasa memiliki rupa-rupa keterbatasan dan ketidaksempurnaan. Banyak kekuranglengkapan yang melekat erat (inheren) di dalam sosok bahasa itu sendiri, yang pada gilirannya justru dapat mencuatkan aneka kesalahpahaman. Sebab pertama dari kekuranglengkapan dan kekurang-sempurnaan bahasa adalah ihwal penandaan atau penyimbolan unsur- unsur kebahasaan. Penandaan komponen-komponen bahasa tersebut lazimnya dilakukan baik secara konvensional maupun inkonvensional. <br><br>Penyimbolan secara konvensional dilaksanakan atas dasar kesepahaman dan kesepakatan bersama di antara sesama warga pemakaian bahasa dalam sebuah masyarakat bahasa. Karena dasar utamanya adalah kesepakatan atau konvensi, maka lazimnya hasil penyimbolan yang demikian itu tidak banyak menghadirkan persoalan. Ambillah contoh kata Jawa segawon yang dalam bahasa Indonesia anjing, dan dalam bahasa Inggris dog. Penamaan terhadap sosok binatang piaraan yang buas, berbulu bagus, tidak terlalu besar dan sukanya meraung-raung keras itu dilakukan secara konvensional. Karena simbol tersebut muncul dalam kesepakatan atau kesepahaman bersama, tidak ditemukan persoalan pemakaian unsur kebahasaan tersebut di dalam praktek komunikasi. <br><br>Penyimbolan kedua dilakukan secara arbitrer. Artinya, satuan lingual tertentu digunakan untuk menyimboli sesuatu entitas di alam raya ini secara semena-mena dan tidak selalu jelas alasan dan justifikasinya.Karena itu, simbolisasi yang demikian rentan terhadap aneka kesamaran dan ketaksaan. Sejumlah pakar bahkan dengan tegas menyebutkan, kesamaan dan ketaksaan tersebut sesungguhnya merupakan sifat kebahasaan melekat, sebagai akibat yang tidak terhindarkan lagi dari simbolisasi arbitrer itu.",
                    questions: [
                        {question: "Masalah utama yang dibicarakan dalam paragraf pertama pada teks di atas adalah...", options: ["Bahasa memiliki rupa-rupa keterbatasan dan ketidaksempurnaan.","Ragam bahasa yang sangat menguntungkan","Penyebab kekuranglengkapan dan ketidaksempurnaan bahasa.","Penandaan unsur-unsur kebahasaan dilakukan baik, secara konvensional maupun inkonvensional.","Kekuranglengkapan di dalam sosok bahasa dapat mencuatkan kesalahpahaman."], correctAnswer: 0},
                        { question: "Jika kata arbitrer diartikan sebagai semena-mena, maka makna kata arbiter adalah..", options: ["Orang yang sering melakukan pekerjaan secara sesuka hatinya.","Orang yang dipercaya untuk menjadi penengah atau pemutus antara kedua belah pihak yang sedang bersengketa.","Orang yang sering mengartikan suatu kata sesuka hatinya.","Orang yang pekerjaannya menjadi perantara perdagangan antara penjual dan pembeli","Orang yang menciptakan bahasa baru."], correctAnswer: 1},
                        { question: "Makna kata berikut ini identik dengan kata ketaksaan, kecuali...", options: ["Kekaburan","Keraguan","Kegelapan","Kejelasan","Ambiguitas"], correctAnswer: 3},
                        { question: "Kesimpulan dari teks di atas adalah...", options: ["Kesamaan dan ketaksaan di dalam sosok bahasa terjadi tanpa sebab","Kesamaran dan ketaksaan di dalam sosok bahasa merupakan hal yang bisa dihindari.","Kesamaran dan ketaksaan di dalam sosok bahasa terjadi sebagai akibat simbolisasi.","Kesamaran dan ketaksaan di dalam sosok bahasa bisa memunculkan aneka kesalahpahaman.","Kesamaan dan ketaksaan di dalam sosok bahasa adalah suatu keniscayaan."], correctAnswer: 2 },
                    ]
                },
                // Contoh soal tunggal (berupa objek)
                { question: "Jika Ali membeli 5 apel dengan harga Rp2.000 per apel, berapa total yang harus ia bayar?", options: ["Rp5.000", "Rp8.000", "Rp10.000", "Rp12.000", "Rp15.000"], correctAnswer: 2 },
                //[
                    //{ question: "Grafik berikut menunjukkan penjualan produk A, B, dan C di bulan Januari. Produk A terjual 100 unit, produk B 150 unit, dan produk C 50 unit. Pertanyaan 1: Berapa total penjualan di bulan Januari?", options: ["200", "250", "300", "350", "400"], correctAnswer: 2 },
                    //{ question: "Berapa persentase penjualan produk A dari total penjualan?", options: ["20%", "25%", "30%", "33,3%", "40%"], correctAnswer: 3 }
                //],
                { question: "Sebuah kereta berangkat pukul 08:00 dan tiba pukul 10:30. Berapa lama perjalanan kereta tersebut?", options: ["1 jam 30 menit", "2 jam", "2 jam 30 menit", "3 jam", "3 jam 30 menit"], correctAnswer: 2 },
                //[
                    //{ question: "Tabel berikut menunjukkan suhu udara di 5 kota. Kota A: 25°C, Kota B: 30°C, Kota C: 20°C, Kota D: 35°C, Kota E: 25°C. Pertanyaan 1: Berapa rata-rata suhu di 5 kota tersebut?", options: ["20°C", "25°C", "27°C", "30°C", "35°C"], correctAnswer: 2 },
                    //{ question: "Berapa selisih suhu antara kota terpanas dan terdingin?", options: ["5°C", "10°C", "15°C", "20°C", "25°C"], correctAnswer: 1 }
                //],
                { question: "Harga sebuah buku adalah Rp5.000. Jika Anda mendapat diskon 20%, berapa harga yang harus dibayar?", options: ["Rp4.000", "Rp4.500", "Rp5.000", "Rp6.000", "Rp7.000"], correctAnswer: 0 },
                { question: "Sebuah mobil melaju dengan kecepatan 60 km/jam, berapa lama waktu yang dibutuhkan untuk menempuh jarak 120 km?", options: ["1 jam", "1.5 jam", "2 jam", "2.5 jam", "3 jam"], correctAnswer: 2 },
                { question: "Sebuah kolam renang diisi dengan air menggunakan dua pipa. Pipa A dapat mengisi kolam dalam 2 jam, dan Pipa B dalam 3 jam. Berapa waktu yang dibutuhkan jika kedua pipa digunakan bersamaan?", options: ["1.2 jam", "1.5 jam", "2 jam", "2.5 jam", "3 jam"], correctAnswer: 0 },
                { question: "Jika 1 kg mangga seharga Rp20.000, berapa harga 2,5 kg mangga?", options: ["Rp40.000", "Rp45.000", "Rp50.000", "Rp60.000", "Rp75.000"], correctAnswer: 2 },
                { question: "Seorang pekerja dapat menyelesaikan sebuah pekerjaan dalam 8 hari. Jika ada 4 pekerja, berapa hari yang dibutuhkan untuk menyelesaikan pekerjaan yang sama?", options: ["2 hari", "4 hari", "6 hari", "8 hari", "10 hari"], correctAnswer: 1 },
                { question: "Sebuah toko menjual kemeja seharga Rp150.000 setelah diskon 25%. Berapakah harga asli kemeja tersebut?", options: ["Rp175.000", "Rp200.000", "Rp225.000", "Rp250.000", "Rp300.000"], correctAnswer: 1 },
                { question: "Dalam sebuah kelas, perbandingan jumlah siswa laki-laki dan perempuan adalah 2:3. Jika jumlah total siswa adalah 30, berapa jumlah siswa laki-laki?", options: ["10", "12", "15", "18", "20"], correctAnswer: 1 },
                { question: "Suhu di sebuah kota adalah 15°C. Keesokan harinya, suhu naik 5°C. Berapa suhu sekarang?", options: ["10°C", "15°C", "20°C", "25°C", "30°C"], correctAnswer: 2 },
                { question: "Sebuah bus menempuh jarak 200 km dalam 4 jam. Berapakah kecepatan rata-rata bus tersebut?", options: ["40 km/jam", "50 km/jam", "60 km/jam", "70 km/jam", "80 km/jam"], correctAnswer: 1 },
                { question: "Jika sebuah kubus memiliki panjang sisi 5 cm, berapakah volume kubus tersebut?", options: ["25 cm³", "50 cm³", "100 cm³", "125 cm³", "150 cm³"], correctAnswer: 3 },
                { question: "Sebuah persegi panjang memiliki panjang 10 cm dan lebar 5 cm. Berapakah kelilingnya?", options: ["15 cm", "20 cm", "25 cm", "30 cm", "50 cm"], correctAnswer: 3 },
                { question: "Kemunculan pola-pola lingkaran geometris di ladang pertanian atau crop circle selalu ... dengan kehadiran alien di tempat itu dengan mengendarai UFO. Dugaan tersebut didasarkan keyakinan bahwa manusia tidak mampu ... pola serumit itu dalam waktu singkat dengan hasil yang hampir sempurna. Sesuai namanya, UFO atau unidentified flying object adalah objek terbang yang tidak ... . Bentuknya bermacam-macam, ada yang seperti titik cahaya yang diam sejenak dan menghilang cepat, ada yang seperti piring terbang. UFO selalu dikaitkan dengan alien, sang makhluk luar angkasa yang dalam film-film fiksi ilmiah ... sebagai sosok kecil, berkepala gundul, telinga lebar, dan berwarna hijau. la digambarkan memiliki kekuatan super, termasuk ... dirinya sama persis dengan makhluk bumi. <br><br>Urutan kata yang paling tepat untuk melengkapi teks di atas adalah...", options: ["dihubungkan, membentuk, dikenal, ditampilkan, membuat.","dihubungkan, membentuk, dikenali, digambarkan, mencipta.","dikaitkan, menghasilkan, dikenal, dimunculkan, membentuk.","dikaitkan, membentuk, dikenali, digambarkan, mengubah.","dibentuk, dikenali, ditampilkan, dihubungkan, membuat"], correctAnswer: 3},
    
            ]
        };

        // State aplikasi
        let questions = []; // Array untuk soal ujian yang sudah diacak dan dipilih
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedOption = null; // Menambahkan variabel untuk melacak pilihan yang aktif
        let timerInterval;
        const EXAM_DURATION = 5400; // Durasi ujian dalam detik (90 menit)
        let timeLeft = EXAM_DURATION;

        // Status untuk setiap soal: 'unanswered', 'answered', 'current'
        let questionStatus = [];

        // Mendapatkan elemen-elemen HTML
        const pages = ['register', 'login', 'quiz', 'result'];
        const pageElements = Object.fromEntries(pages.map(id => [id, document.getElementById(`${id}-page`)]));

        const nameRegInput = document.getElementById('name-reg');
        const emailRegInput = document.getElementById('email-reg');
        const proofCheckbox = document.getElementById('proof-checkbox');
        const registerBtn = document.getElementById('register-btn');
        const registerMessage = document.getElementById('register-message');

        const emailLoginInput = document.getElementById('email-login');
        const tokenLoginInput = document.getElementById('token-login');
        const loginBtn = document.getElementById('login-btn');
        const loginMessage = document.getElementById('login-message');

        const navGrid = document.getElementById('nav-grid');
        const questionTextElement = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const nextBtn = document.getElementById('next-btn');
        const skipBtn = document.getElementById('skip-btn');
        const timerDisplay = document.getElementById('timer');
        
        const userNameElement = document.getElementById('user-name');
        const finalScoreElement = document.getElementById('final-score');

        // Fungsi untuk menampilkan halaman
        function showPage(pageId) {
            pages.forEach(id => {
                const pageElement = pageElements[id];
                if (id === pageId) {
                    pageElement.style.display = (pageId === 'quiz') ? 'flex' : 'block';
                } else {
                    pageElement.style.display = 'none';
                }
            });
            
            // Atur ulang state saat kembali ke halaman pendaftaran
            if (pageId === 'register') {
                resetExamState();
            }
        }

        // Fungsi untuk mereset status ujian
        function resetExamState() {
            questions = [];
            currentQuestionIndex = 0;
            score = 0;
            selectedOption = null;
            loggedInUser = null;
            questionStatus = [];
            timeLeft = EXAM_DURATION;
            clearInterval(timerInterval);
            nextBtn.textContent = 'Simpan dan Lanjutkan';
        }

        // Fungsi untuk menghasilkan token acak
        function generateToken() {
            return Math.random().toString(36).substr(2, 6).toUpperCase();
        }

        // Fungsi validasi email
        function isValidEmail(email) {
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return regex.test(email);
        }

        // Event listener untuk tombol pendaftaran
        registerBtn.addEventListener('click', () => {
            const name = nameRegInput.value.trim();
            const email = emailRegInput.value.trim();

            if (!name || !email) {
                registerMessage.textContent = 'Nama dan email tidak boleh kosong!';
                registerMessage.classList.remove('text-green-600');
                registerMessage.classList.add('text-red-500');
                return;
            }

            if (!isValidEmail(email)) {
                registerMessage.textContent = 'Format email tidak valid!';
                registerMessage.classList.remove('text-green-600');
                registerMessage.classList.add('text-red-500');
                return;
            }
            
            if (!proofCheckbox.checked) {
                registerMessage.textContent = 'Anda harus mengonfirmasi bukti follow TikTok.';
                registerMessage.classList.remove('text-green-600');
                registerMessage.classList.add('text-red-500');
                return;
            }

            if (usersDB[email]) {
                registerMessage.textContent = 'Email sudah terdaftar. Silakan login.';
                registerMessage.classList.remove('text-green-600');
                registerMessage.classList.add('text-red-500');
                return;
            }

            const token = generateToken();
            usersDB[email] = { name, token, score: null };
            registerMessage.textContent = `Pendaftaran berhasil! Token Anda: ${token}. Gunakan token ini untuk login.`;
            registerMessage.classList.remove('text-red-500');
            registerMessage.classList.add('text-green-600');

            nameRegInput.value = '';
            emailRegInput.value = '';
            proofCheckbox.checked = false;
        });

        // Event listener untuk tombol login
        loginBtn.addEventListener('click', () => {
            const email = emailLoginInput.value.trim();
            const token = tokenLoginInput.value.trim().toUpperCase();

            const user = usersDB[email];

            if (!user) {
                loginMessage.textContent = 'Email belum terdaftar.';
                return;
            }

            if (user.token !== token) {
                loginMessage.textContent = 'Token tidak valid.';
                return;
            }

            loggedInUser = user;
            emailLoginInput.value = '';
            tokenLoginInput.value = '';
            loginMessage.textContent = '';
            
            // Panggil fungsi untuk membangun soal ujian
            buildQuiz();
            showPage('quiz');
            renderNavGrid(); // Render navigasi soal
            navigateToQuestion(0); // Mulai dari soal pertama
            startTimer(); // Mulai timer
        });

        // Fungsi utilitas untuk mengacak array (Fisher-Yates shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Fungsi untuk membangun soal ujian dari bank soal
        function buildQuiz() {
            const verbalQuestionsCount = 23;
            const numerikQuestionsCount = 25;
            const pemecahanMasalahQuestionsCount = 12;

            // Ambil soal verbal dan numerik
            const shuffledVerbal = shuffleArray([...questionBank.verbal]).slice(0, verbalQuestionsCount);
            const shuffledNumerik = shuffleArray([...questionBank.numerik]).slice(0, numerikQuestionsCount);
            
            // Logika untuk soal pemecahan masalah (dengan set soal)
            const pemecahanMasalahCandidates = shuffleArray([...questionBank.pemecahanMasalah]);
            let pemecahanMasalahQuestions = [];
            
            for (const item of pemecahanMasalahCandidates) {
                // Hentikan jika jumlah soal sudah terpenuhi
                if (pemecahanMasalahQuestions.length >= pemecahanMasalahQuestionsCount) {
                    break;
                }


                // Cek apakah item adalah set soal (array) atau soal tunggal (objek)
                if (Array.isArray(item)) {
                    // Jika set soal, tambahkan semua soal dalam set
                    // Cek apakah cukup ruang di kuis untuk set ini
                    if (pemecahanMasalahQuestions.length + item.length <= pemecahanMasalahQuestionsCount) {
                        pemecahanMasalahQuestions.push(...item);
                    }
                } else {
                    // Jika soal tunggal, tambahkan satu soal
                    pemecahanMasalahQuestions.push(item);
                }
            }

            // Gabungkan semua soal dari tiga kategori dan acak kembali urutannya
            questions = shuffleArray([...shuffledVerbal, ...shuffledNumerik, ...pemecahanMasalahQuestions]);
           

            // Inisialisasi status soal untuk kuis baru
            questionStatus = new Array(questions.length).fill('unanswered');

            
        }

        // Fungsi untuk merender grid navigasi soal
        function renderNavGrid() {
            navGrid.innerHTML = '';
            questionStatus.forEach((status, index) => {
                const navSquare = document.createElement('div');
                navSquare.textContent = index + 1;
                navSquare.classList.add('nav-square', 'unanswered'); // Default status
                navSquare.addEventListener('click', () => navigateToQuestion(index));
                navGrid.appendChild(navSquare);
            });
        }

        // Fungsi untuk memperbarui warna kotak navigasi soal
        function updateNavColors() {
            const navSquares = navGrid.querySelectorAll('.nav-square');
            navSquares.forEach((square, index) => {
                square.classList.remove('unanswered', 'answered', 'current');
                square.classList.add(questionStatus[index]);
            });
        }

        // Fungsi untuk menavigasi ke soal tertentu
        function navigateToQuestion(index) {
            // Logika ini dipanggil oleh tombol navigasi, sehingga kita tidak ingin mengubah status menjadi 'answered'
            if (questionStatus[currentQuestionIndex] === 'current') {
                // Kembali ke status 'unanswered' jika dilewati tanpa disimpan
                questionStatus[currentQuestionIndex] = 'unanswered';
            }
            
            currentQuestionIndex = index;
            selectedOption = null; // Reset pilihan yang dipilih
            questionStatus[currentQuestionIndex] = 'current'; // Atur status soal saat ini menjadi 'current'
            updateNavColors();
            renderQuestion();

            // Ubah teks tombol di soal terakhir
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = 'Simpan dan Selesai Ujian';
            } else {
                nextBtn.textContent = 'Simpan dan Lanjutkan';
            }
        }

        // Fungsi untuk menampilkan pertanyaan
        function renderQuestion() {
            nextBtn.disabled = true; // Nonaktifkan tombol 'Simpan dan Lanjutkan'
            optionsContainer.innerHTML = '';

            if (currentQuestionIndex < questions.length) {
                const currentQuestion = questions[currentQuestionIndex];
                questionTextElement.innerHTML = `Pertanyaan ${currentQuestionIndex + 1} dari ${questions.length}: ${currentQuestion.question}`;

                // --- LOGIKA MENGACAK OPSI JAWABAN ---
                const originalOptions = [...currentQuestion.options];
                const correctAnswerText = originalOptions[currentQuestion.correctAnswer];
                const shuffledOptions = shuffleArray(originalOptions);
                const newCorrectAnswerIndex = shuffledOptions.findIndex(option => option === correctAnswerText);
                currentQuestion.correctAnswer = newCorrectAnswerIndex;
                // --- AKHIR LOGIKA MENGACAK ---

                const optionLetters = ['A', 'B', 'C', 'D', 'E'];
                shuffledOptions.forEach((option, index) => {
                    const optionButton = document.createElement('button');
                    optionButton.textContent = `${optionLetters[index]}. ${option}`;
                    optionButton.classList.add('w-full', 'p-4', 'bg-gray-100', 'text-left', 'rounded-lg', 'font-medium', 'text-gray-800', 'hover:bg-gray-200', 'focus:outline-none', 'option-btn');
                    optionButton.onclick = () => handleAnswer(index, optionButton);
                    
                    // Tampilkan jawaban yang sudah dipilih jika ada
                    if (currentQuestion.userAnswer !== null) {
                        if (index === currentQuestion.userAnswer) {
                            optionButton.classList.add('correct');
                            selectedOption = optionButton; // Tetapkan pilihan yang sudah ada
                            nextBtn.disabled = false; // Aktifkan tombol
                        }
                    }
                    
                    optionsContainer.appendChild(optionButton);
                });
            }
        }

        // Fungsi untuk menangani jawaban
        function handleAnswer(selectedIndex, selectedButton) {
            const currentQuestion = questions[currentQuestionIndex];
            
            // Hapus kelas 'correct' dari semua tombol
            const allOptions = optionsContainer.querySelectorAll('.option-btn');
            allOptions.forEach(btn => btn.classList.remove('correct'));

            // Jawaban yang dipilih akan berwarna hijau
            selectedButton.classList.add('correct');
            selectedOption = selectedButton;

            currentQuestion.userAnswer = selectedIndex; // Simpan jawaban user

            // Aktifkan tombol 'Simpan dan Lanjutkan'
            nextBtn.disabled = false;
        }

        // Fungsi untuk pindah ke soal berikutnya
        function nextQuestion() {
            // Logika ini sekarang hanya dipanggil oleh tombol "Simpan dan Lanjutkan"
            if (questions[currentQuestionIndex].userAnswer !== null) {
                questions[currentQuestionIndex].isAnswered = true;
                questionStatus[currentQuestionIndex] = 'answered'; // Set status menjadi 'answered'
                updateNavColors();
            }

            if (currentQuestionIndex < questions.length - 1) {
                navigateToQuestion(currentQuestionIndex + 1);
            } else {
                // Jika sudah di soal terakhir, hitung skor dan tampilkan hasil
                calculateFinalScore();
                showResults();
            }
        }

        // Fungsi untuk tombol 'Lewati'
        function skipQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                // Jika userAnswer ada, hapus agar statusnya tetap 'unanswered' saat dilewati
                questions[currentQuestionIndex].userAnswer = null;
                navigateToQuestion(currentQuestionIndex + 1);
            } else {
                // Jika sudah di soal terakhir, hitung skor dan tampilkan hasil
                calculateFinalScore();
                showResults();
            }
        }

        // Fungsi untuk menghitung skor akhir
        function calculateFinalScore() {
            score = 0;
            questions.forEach(q => {
                if (q.userAnswer !== null && q.userAnswer === q.correctAnswer) {
                    score += 5;
                }
            });
        }
        
        // Fungsi untuk menampilkan hasil akhir
        function showResults() {
            clearInterval(timerInterval); // Hentikan timer
            if (loggedInUser) {
                loggedInUser.score = score;
                userNameElement.textContent = loggedInUser.name;
                finalScoreElement.textContent = `${score} dari ${questions.length * 5}`;
            }
            showPage('result');
        }

        // --- FITUR TIMER ---
        function startTimer() {
            timerInterval = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

                if (timeLeft <= 0) {
                    calculateFinalScore();
                    showResults();
                } else {
                    timeLeft--;
                }
            }, 1000);
        }
        // --- AKHIR FITUR TIMER ---

        // Menambahkan event listener ke tombol 'Simpan dan Lanjutkan' dan 'Lewati'
        nextBtn.addEventListener('click', nextQuestion);
        skipBtn.addEventListener('click', skipQuestion);

        // Memulai aplikasi dengan menampilkan halaman pendaftaran
        showPage('register');
    </script>
